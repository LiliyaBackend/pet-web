<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Items to calculate</title>
    <script src="/static/jquery-1.11.3.js"></script>
    <script>
        function addToCart(item_id, btn){
            opr = $(btn).parents("tr").find(".operand").val();
            $.ajax({
                type:"POST",
                url: "/add_to_cart",
                data: {
                    id:item_id,
                    operand:opr
                },
                success: function (msg){
                    $("#itemCnt").text(msg);
                }
            })
        }

        // Добавляем функцию для новых игрушек
        function addToyToCart(item_id){
            alert(item_id + " добавлен в корзину!"); // Пока просто уведомление
            // Здесь позже подключим реальную корзину
        }
    </script>
    <style>
        .products { display: flex; gap: 20px; margin-top: 30px; }
        .product { border: 1px solid #ccc; padding: 10px; text-align: center; width: 160px; }
        .prod-name { font-weight: bold; margin: 10px 0 5px 0; }
        .prod-price { color: green; margin-bottom: 10px; }
        .add-btn { padding: 5px 10px; cursor: pointer; }
    </style>
</head>
<body>
{% include 'header.html' %}

{% if error is not none%}
    <h2 style="color:red">{{error}}</h2>
{% endif %}

<!-- Таблица с формулами (не трогаем) -->
<table border="1">
<tr><th>№</th><th>Function</th><th>Parameter</th><th>Add</th></tr>

{% for item in items %}
<tr>
    <td>{{loop.index}}</td>
    <td>{{item.name}}</td>
    <td><input type="text" name="operand" value="" class="operand"></td>
    <td><input type="button" value="add" onclick="addToCart({{item.id}}, this)"></td>
</tr>
{% endfor %}
</table>

<!-- Новые игрушки -->
<div class="products">
  <div class="product">
    <img src="{{ url_for('static', filename='img/item1.png') }}" alt="item1" width="150">
    <div class="prod-name">item1</div>
    <div class="prod-price">€9.99</div>
    <button class="add-btn" onclick="addToyToCart('item1')">Add</button>
  </div>

  <div class="product">
    <img src="{{ url_for('static', filename='img/item2.png') }}" alt="item2" width="150">
    <div class="prod-name">item2</div>
    <div class="prod-price">€14.99</div>
    <button class="add-btn" onclick="addToyToCart('item2')">Add</button>
  </div>

  <div class="product">
    <img src="{{ url_for('static', filename='img/item3.png') }}" alt="item3" width="150">
    <div class="prod-name">item3</div>
    <div class="prod-price">€7.50</div>
    <button class="add-btn" onclick="addToyToCart('item3')">Add</button>
  </div>
</div>

</body>
</html>
